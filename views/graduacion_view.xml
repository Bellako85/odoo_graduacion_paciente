<odoo>
  <!-- FORM de optica.graduacion -->
  <record id="view_graduacion_form" model="ir.ui.view">
    <field name="name">optica.graduacion.form</field>
    <field name="model">optica.graduacion</field>
    <field name="arch" type="xml">
      <form string="Graduaci칩n de Paciente">
        <header>
          <button name="action_imprimir_historia_clinica"
                  string="Imprimir Historia Cl칤nica" 
                  type="object"
                  class="mi-btn shadow-effect"/>
          <!-- AGREGAR ESTOS NUEVOS BOTONES EN EL HEADER -->
          <button name="action_calcular_distancia_vertice" 
                  type="object" 
                  string="Calcular Vertex LC" 
                  class="mi-btn shadow-effect"
                  style="margin-left: 8px;"/>
          <button name="action_mostrar_notacion_bicilindrica" 
                  type="object" 
                  string="Notaci칩n Bicil칤ndrica" 
                  class="mi-btn shadow-effect"
                  style="margin-left: 8px;"/>
        </header>
       
        <sheet>
          <!-- Cabecera b치sica (EXISTENTE) -->
          <group>
            <group>
              <field name="paciente_id" class="graduacion-field"/>
              <field name="fecha" class="graduacion-field"/>
              <field name="diagnostico" class="graduacion-field"/>
              <field name="tipo_lente" class="graduacion-field"/>
              <field name="profesional" class="graduacion-field"/>
            </group>
          </group>
         
          <!-- Rx en dos columnas (EXISTENTE) -->
          <group col="2">
            <group string="Ojo Derecho">
              <field name="ojo_derecho_esfera" string="ESF" placeholder="0.00" class="graduacion-field"/>
              <field name="ojo_derecho_cilindro" string="CIL" placeholder="0.00" class="graduacion-field"/>
              <field name="ojo_derecho_eje" string="EJE" placeholder="0" class="graduacion-field"/>
              <field name="ojo_derecho_av" string="AV" placeholder="20/20" class="graduacion-field"/>
            </group>

            <group string="Ojo Izquierdo">
              <field name="ojo_izquierdo_esfera" string="ESF" placeholder="0.00" class="graduacion-field"/>
              <field name="ojo_izquierdo_cilindro" string="CIL" placeholder="0.00" class="graduacion-field"/>
              <field name="ojo_izquierdo_eje" string="EJE" placeholder="0" class="graduacion-field"/>
              <field name="ojo_izquierdo_av" string="AV" placeholder="20/20" class="graduacion-field"/>
            </group>
          </group>
          
          <!-- Datos adicionales en 2 columnas (EXISTENTE) -->
          <group string="Datos adicionales" col="2">
            <group>
              <field name="adicion" string="ADD" placeholder="0.00" class="graduacion-field"/>
              <field name="distancia_nasopupilar_od" string="DNP OD" placeholder="0.0" class="graduacion-field"/>
            </group>
            <group>
              <field name="distancia_interpupilar" string="DIP" placeholder="0.0" class="graduacion-field"/>
              <field name="distancia_nasopupilar_oi" string="DNP OI" placeholder="0.0" class="graduacion-field"/>
            </group>
          </group>

          <!-- ========== NUEVOS CAMPOS AGREGADOS AQU칈 ========== -->
          
          <!-- DIAGN칍STICO AUTOM츼TICO -->
          <group string="游뽘 Diagn칩stico Autom치tico" col="2">
            <group string="Ojo Derecho">
              <field name="diagnostico_od_detallado" readonly="1" nolabel="1" class="graduacion-field"/>
              <field name="orientacion_od" readonly="1" nolabel="1" class="graduacion-field"/>
            </group>
            <group string="Ojo Izquierdo">
              <field name="diagnostico_oi_detallado" readonly="1" nolabel="1" class="graduacion-field"/>
              <field name="orientacion_oi" readonly="1" nolabel="1" class="graduacion-field"/>
            </group>
          </group>

          <!-- SERIES RECOMENDADAS -->
          <group string="游늵 Series Recomendadas" col="3">
            <field name="serie_recomendada_od" readonly="1" string="Serie OD" class="graduacion-field"/>
            <field name="serie_recomendada_oi" readonly="1" string="Serie OI" class="graduacion-field"/>
            <field name="serie_recomendada_general" readonly="1" string="Serie General" class="graduacion-field"/>
          </group>

          <!-- TRANSPOSICI칍N -->
          <group string="游댃 Transposici칩n" col="2">
            <group string="OD Transpuesto">
              <field name="od_esfera_trans" string="ESF" readonly="1" class="graduacion-field"/>
              <field name="od_cilindro_trans" string="CIL" readonly="1" class="graduacion-field"/>
              <field name="od_eje_trans" string="EJE" readonly="1" class="graduacion-field"/>
            </group>
            <group string="OI Transpuesto">
              <field name="oi_esfera_trans" string="ESF" readonly="1" class="graduacion-field"/>
              <field name="oi_cilindro_trans" string="CIL" readonly="1" class="graduacion-field"/>
              <field name="oi_eje_trans" string="EJE" readonly="1" class="graduacion-field"/>
            </group>
          </group>

          <!-- ========== FIN DE NUEVOS CAMPOS ========== -->

          <!-- Otros (EXISTENTE) -->
          <group>
            <field name="observaciones" colspan="2" class="graduacion-field"/>
          </group>
        </sheet>
      </form>
    </field>
  </record>
  
  <!-- El resto de tu XML se mantiene IGUAL (Kanban, Tree, etc.) -->                                 

  <!-- Vista Kanban (EXISTENTE - NO CAMBIAR) -->
  <record id="view_graduacion_kanban" model="ir.ui.view">
    <!-- ... contenido existente se mantiene igual ... -->
  </record>
              
  <!-- Vista tipo 치rbol (EXISTENTE - NO CAMBIAR) -->
  <record id="view_graduacion_tree" model="ir.ui.view">
    <!-- ... contenido existente se mantiene igual ... -->
  </record>

  <!-- Acci칩n y men칰s (EXISTENTE - NO CAMBIAR) -->
  <record id="action_graduacion" model="ir.actions.act_window">
    <!-- ... contenido existente se mantiene igual ... -->
  </record>

  <menuitem id="menu_optica_root" name="칍ptica" sequence="10"/>
  <menuitem id="menu_graduaciones" name="Graduaciones"
            parent="menu_optica_root" action="action_graduacion" sequence="20"/>
		
  <!-- Pesta침a en Contactos (EXISTENTE - NO CAMBIAR) -->
  <record id="view_res_partner_form_inherit_graduaciones" model="ir.ui.view">
    <!-- ... contenido existente se mantiene igual ... -->
  </record>
</odoo>